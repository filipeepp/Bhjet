function carregaMapa(){var n=new google.maps.LatLng(-19.878951,-43.933833),t={zoom:6,center:n,mapTypeId:google.maps.MapTypeId.RoadMap};map=new google.maps.Map(document.getElementById("map_canvas"),t);BuscaAreasCadastradas()}function adicionarArea(n){var t=new google.maps.Polygon({paths:n,draggable:!0,editable:!0,strokeColor:"#ffeb3b",strokeOpacity:.8,strokeWeight:2,fillColor:"#ffeb3b",fillOpacity:.35});areas.push(t);t.setMap(map);google.maps.event.addListener(t,"rightclick",function(){if(confirm("Deseja remover esta Área de Atuação ?")){var n=areas.indexOf(this);areas.splice(n,1);this.setMap(null);getPolygonCoords()}});google.maps.event.addListener(t.getPath(),"insert_at",getPolygonCoords);google.maps.event.addListener(t.getPath(),"set_at",getPolygonCoords);getPolygonCoords()}function getPolygonCoords(){var n="[\n ",i,r,u,t;for(n+=" {\n ",i=0;i<areas.length;i++){for(n+='"Area": [ \n',r=areas[i],u=r.getPath().getLength(),t=0;t<u;t++)n+="\n {",n+='\n   "Latitude": "'+r.getPath().getAt(t).lat()+'",',n+='\n   "Longitude": "'+r.getPath().getAt(t).lng()+'"',n+="\n }",t<u-1&&(n+=",");n+="\n]\n"}n+=" }\n ";n+="]";$("#info").val(n)}function initAutocomplete(){var n=document.getElementById("pac-input");autocomplete=new google.maps.places.Autocomplete(n,{});autocomplete.addListener("place_changed",function(){var n=autocomplete.getPlace(),i=n.geometry.location,t=[new google.maps.LatLng(n.geometry.location.lat()+1,n.geometry.location.lng()+1),new google.maps.LatLng(n.geometry.location.lat()-.5,n.geometry.location.lng()+1),new google.maps.LatLng(n.geometry.location.lat()-.5,n.geometry.location.lng()-.5),new google.maps.LatLng(n.geometry.location.lat()+1,n.geometry.location.lng()-.5),];adicionarArea(t);$("#pac-input").val("")})}function BuscaAreasCadastradas(){$.ajax({url:"/Atuacao/BuscaAreas",dataType:"json",type:"GET",success:function(n){var t=JSON.parse(n);$.each(t,function(n,t){for(var u,f,r=[],i=0;i<t.GeoVertices.length;i++)u=t.GeoVertices[i].Latitude,f=t.GeoVertices[i].Longitude,r.push(new google.maps.LatLng(u,f));adicionarArea(r)});(n==""||n==undefined)&&($("#msgModal").text("Não foram encontrados Áreas de atuação para ser exibida no mapa."),$("#imgMensagem").attr("src","..\\Images\\warming.png"),$("#myModal").modal("show"))},error:function(n){var t=n}})}function AtualizaAreas(){$.ajax({url:"/Atuacao/CadastraAreas",type:"POST",dataType:"json",contentType:"application/json",data:$("#info").val(),success:function(){MensagemSucesso("Áreas de atuação atualizadas com sucesso.")},error:function(){$("html, body").animate({scrollTop:$(document).height()},1e3)}})}function BuscaProfissionais(){var n=$("#pesquisaProfissional");$("#ProfissionalSelecionado").find("option").remove().end();$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaProfissionais?trechoPesquisa="+n.val(),success:function(n){if(n!==""&&n!==undefined){$("#ProfissionalSelecionado").find("option").remove().end();$("<option value=><\/option>").appendTo("#ProfissionalSelecionado");$.each(n,function(n,t){var i="<option value="+t.value+">"+t.label+"<\/option>";$(i).appendTo("#ProfissionalSelecionado")});$("#ProfissionalSelecionado").mouseup()}else AdicionarErroCampo("ProfissionalSelecionado","Não foi possível encontrar o profissional desejado.",4e3)}})}function BuscaTarifas(n){$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaTarifas?idCliente="+n,success:function(n){n!==""&&n!==undefined&&($("#ValorDiaria").val(n.DecValorDiaria),$("#ValorKMAdicional").val(n.decValorKMAdicionalDiaria),$("#FranquiaKMDiaria").val(n.decFranquiaKMDiaria))}})}function BuscaComissaoProfissional(n){$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaComissao?idProfissional="+n,success:function(n){n!==""&&n!==undefined&&($("#ValorComissao").val(n.decPercentualComissao),$("#ValorComissao").mask("##0,00%",{reverse:!0}))}})}function BuscaClientes(){var n=$("#pesquisaCliente");$("#TarifaCliente").find("option").remove().end();$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaClientes?trechoPesquisa="+n.val(),success:function(n){if(n!==""&&n!==undefined&&n.length>0){$("#ClienteSelecionado").find("option").remove().end();$("<option value=><\/option>").appendTo("#ClienteSelecionado");$.each(n,function(n,t){var i="<option value="+t.value+">"+t.label+"<\/option>";$(i).appendTo("#ClienteSelecionado")});$("#ClienteSelecionado").mouseup()}else AdicionarErroCampo("ClienteSelecionado","Não foi possível encotrar o cliente desejado.",4e3)}})}function validaDatePickerManual(n,t){var i=t.split("/"),r=new Date(i[2].split(" ")[0],i[1]-1,i[0]),u=new Date;r<u&&($("#"+n).val(""),$("#"+n).datepicker("hide"),AdicionarErroCampo(n,"A data digitada não pode ser menor que a data atual.",4e3))}function mascaraComissoes(){$("input[id*='ValorComissao']").each(function(){$(this).maskMoney({prefix:"R$ ",decimal:",",thousands:"."})});$("input[id*='VigenciaInicio'], input[id*='VigenciaFim']").each(function(){$(this).mask("00/00/0000",{onComplete:function(){},placeholder:"__/__/____"});$(this).datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0,onSelect:function(){$("#PeriodoInicial").val($("#PeriodoInicial").val()+" 09:00")}})})}function removeComissao(n){$.ajax({url:"/Motorista/ExcluirComissao?numeroComissao="+n,type:"POST",dataType:"html",data:$("#DetalheMotorista").serialize(),success:function(){window.location.href="/Motorista/Novo?alteraComissao=TRUE";mascaraComissoes();$("html, body").animate({scrollTop:$(document).height()},1e3)},error:function(){$("html, body").animate({scrollTop:$(document).height()},1e3)}})}function BuscaClientes(){var n=$("#pesquisaCliente");$.ajax({dataType:"json",type:"GET",url:"/Faturamento/BuscaClientes?trechoPesquisa="+n.val(),success:function(n){if(n!==""&&n!==undefined&&n.length>0){$("#ClienteSelecionado").find("option").remove().end();$("<option value=><\/option>").appendTo("#ClienteSelecionado");$.each(n,function(n,t){var i="<option value="+t.value+">"+t.label+"<\/option>";$(i).appendTo("#ClienteSelecionado")});$("#ClienteSelecionado").mouseup()}else AdicionarErroCampo("ClienteSelecionado","Não foi possível encotrar o cliente desejado.",4e3)}})}function carregaMapa(){var n=new google.maps.LatLng(-19.8157,-43.9542),t={zoom:15,center:n,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map_canvas"),t);map.setCenter(new google.maps.LatLng(-19.878946,-43.933877))}function FazMarcacao(n,t,i,r){var e,u,f;n=n.replace(",",".");t=t.replace(",",".");e=n+","+t;u=new google.maps.LatLng(n,t);map.setZoom(15);f=new google.maps.Marker({position:u,map:map,icon:i==!0?"/./Images/mapCorrida.png":"/./Images/mapCar.png",animation:google.maps.Animation.DROP});f.addListener("click",function(){var n=new google.maps.InfoWindow;n.setContent("-----------------------<\/br><b>BH Jet Express<\/b><\/br>-----------------------<\/br>"+r);n.open(map,f)});map.setCenter(u)}function buscaGraficoResumoSituacaoChamados(){$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaResumoSituacaoChamados",success:function(n){var t=[],i=[],r=[],u,f;$(n).each(function(u){t.push(month[n[u].Mes]);i.push(n[u].ChamadosConcluidos);r.push(n[u].ChamadosAdvertentes)});u=document.getElementById("canvasz").getContext("2d");f=new Chart(u,{type:"line",data:{labels:t,datasets:[{label:"Pendetes",data:r,backgroundColor:["rgb(255, 255, 102, 0.2)"],borderColor:["rgb(255, 204, 0, 1)"],borderWidth:1},{label:"Concluídos",data:i,backgroundColor:["\trgb(0, 153, 77, 0.2)",],borderColor:["rgb(0, 153, 0, 1)",],borderWidth:1},]},options:{title:{display:!0,text:"Chamados por Situação",fontColor:"#000"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}})}function buscaGraficoResumoSituacaoAtendimentos(){$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaResumoAtendimentos",success:function(n){var t=[],i=[],r=[],u,f;$(n).each(function(u){t.push(month[n[u].Mes]);i.push(n[u].QtdAtendimentoMotociclista);r.push(n[u].QtdAtendimentoMotorista)});u=document.getElementById("canvas").getContext("2d");f=new Chart(u,{type:"line",data:{labels:t,datasets:[{label:"Motoqueiro",data:i,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1},{label:"Motorista",data:r,backgroundColor:["rgb(54, 162, 235, 0.2)",],borderColor:["rgb(0, 128, 255, 1)",],borderWidth:1},]},options:{title:{display:!0,text:"Atendimentos por profissional",fontColor:"#000"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}})}function parseDMY(n){var t=n.split("/"),i=parseInt(t[0],10),r=parseInt(t[1],10),u=parseInt(t[2],10);return new Date(u,r-1,i)}function isValidDate(n){var i=n,r,t,u;return i==""?!1:(r=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,t=i.match(r),t==null)?!1:(dtDay=t[1],dtMonth=t[3],dtYear=t[5],dtMonth<1||dtMonth>12)?!1:dtDay<1||dtDay>31||(dtMonth==4||dtMonth==6||dtMonth==9||dtMonth==11)&&dtDay==31||dtMonth==2&&(u=dtYear%4==0&&(dtYear%100!=0||dtYear%400==0),dtDay>29||dtDay==29&&!u)?!1:!0}function alteraMenu(){$(".sidebar-menu").find("li").each(function(){return($(this).removeClass("active"),$(this)[0].textContent.indexOf(window.location.href.split("/")[3])!==-1)?($(this).addClass("active"),!1):$(this)[0].textContent.indexOf("Início")!==-1&&window.location.href.split("/")[3]=="Home"&&window.location.href.split("/")[4]=="Index"?($(this).addClass("active"),!1):void 0})}function MensagemAlerta(n){$("#msgModal").text(n);$("#imgMensagem").attr("src","..\\Images\\warming.png");$("#myModal").modal("show")}function MensagemSucesso(n){$("#msgModal").text(n);$("#imgMensagem").attr("src","..\\Images\\sucesso.png");$("#myModal").modal("show")}function Carregamento(){}function AdicionarErroCampo(n,t,i){var r=document.createElement("p"),f=document.createTextNode(t),u;r.appendChild(f);r.className="msgDigitacao";r.style.position="relative";r.style.fontSize="12px";r.style.color="#c33939";r.style.display="inline";$("#"+n)!=undefined&&($("#"+n).next().hasClass("msgDigitacao")&&$("#"+n).next().remove(),$("#"+n).after(r));u=i,function(t){setTimeout(function(){$("#"+n).next().remove()},t)}(u)}function delay(n,t){var i=0;return function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,u)},t||0)}}function closePopover(){$("label[rel=popover]").popover("hide")}function BuscaClientes(n){var t=$("#pesquisaCliente");$.ajax({dataType:"json",type:"GET",url:"/Usuario/BuscaClientes?trechoPesquisa="+t.val(),success:function(t){if(t!==""&&t!==undefined&&t.length>0){$("#ClienteSelecionado").find("option").remove().end();$("<option value=><\/option>").appendTo("#ClienteSelecionado");$.each(t,function(n,t){var i="<option value="+t.value+">"+t.label+"<\/option>";$(i).appendTo("#ClienteSelecionado")});n!==undefined&&$("#ClienteSelecionado").val(n);$("#ClienteSelecionado").mouseup()}else AdicionarErroCampo("ClienteSelecionado","Não foi possível encotrar o cliente desejado.",4e3)}})}function necessarioCliente(){var n=$("#TipoUser").prop("selectedIndex");return n!=undefined&&(n===2||n===3)?($("#cliRefer").css("display","unset"),!0):($("#cliRefer").css("display","none"),!1)}function ExcluirUsuario(n){$.ajax({dataType:"json",type:"GET",url:"/Usuario/DeletaUsuario?id="+n,success:function(n){$("#loading").hide();$("#msgModal").text(n);$("#imgMensagem").attr("src","\\.\\Images\\sucesso.png");$("#myModal button").click(function(){window.location.href="/Usuario/Listar/"});$("#myModal").modal("show")},error:function(){$("#loading").hide();$("#msgModal").text("Não foi possível excluir o usuário selecionado, tente novamente mais tarde.");$("#imgMensagem").attr("src","\\.\\Images\\warming.png");$("#myModal").modal("show")}})}function AlterarSituacao(n,t){var i="situacao="+t+"&id="+n;$.ajax({dataType:"json",type:"GET",url:"/Usuario/AlteraSituacao?"+i,success:function(n){$("#loading").hide();$("#msgModal").text(n);$("#imgMensagem").attr("src","\\.\\Images\\sucesso.png");$("#myModal button").click(function(){window.location.href="/Usuario/Listar/"});$("#myModal").modal("show")},error:function(){$("#loading").hide();$("#msgModal").text("Não foi possível alterar a situação do usuário selecionado, tente novamente mais tarde.");$("#imgMensagem").attr("src","\\.\\Images\\warming.png");$("#myModal").modal("show")}})}function AlterarSituacao(n,t){var i="situacao="+t+"&id="+n;$.ajax({dataType:"json",type:"GET",url:"/Usuario/AlteraSituacao?"+i,success:function(n){$("#loading").hide();$("#msgModal").text(n);$("#imgMensagem").attr("src","\\.\\Images\\sucesso.png");$("#myModal button").click(function(){window.location.href="/Usuario/Listar/"});$("#myModal").modal("show")},error:function(){$("#loading").hide();$("#msgModal").text("Não foi possível alterar a situação do usuário selecionado, tente novamente mais tarde.");$("#imgMensagem").attr("src","\\.\\Images\\warming.png");$("#myModal").modal("show")}})}function EditarUsuario(n){editarUsuarioNavegacao(n)}function editarUsuarioNavegacao(n){window.location="/Usuario/Novo?Edicao=true&ID="+n}function GetOptionsViaCep(n){return{onComplete:function(t){var t=n.Cep.val().replace(/\D/g,""),i;t!=""&&(i=/^[0-9]{8}$/,i.test(t)&&$.getJSON("https://viacep.com.br/ws/"+t+"/json/?callback=?",function(t){"erro"in t?limpaEndereco():(n.Rua.val(t.logradouro),n.Bairro.val(t.bairro),n.Cidade.val(t.localidade),n.Estado.val(t.uf),n.NumeroEndereco.focus())}))}}}function limpaEndereco(){$("#Rua").val("");$("#Bairro").val("");$("#Cidade").val("");$("#UF").val("")}var map=null,areas=[];$(document).ready(function(){carregaMapa();initAutocomplete();$("#bntAtualizaAreas").click(function(){var n=$("#info").val().replace(/[^\w\s]/gi,"");if(n=n.replace(/\s/g,""),n==""||$("#info").val()==""||$("#info").val()==undefined)return MensagemAlerta("Não existem Áreas de atuação selecionadas no mapa."),!1;AtualizaAreas()})});document.addEventListener("DOMContentLoaded",function(){$("#ValorDiaria").mask("000.000.000.000.000,00",{reverse:!0});$("#FranquiaKMDiaria").mask("000.000.000.000.000,00",{reverse:!0});$("#ValorComissao").mask("##0,00%",{reverse:!0});$("#HorarioInicial").mask("00:00",{reverse:!0,placeholder:"00:00"});$("#HorarioFim").mask("00:00",{reverse:!0,placeholder:"00:00"});$("#PeriodoInicial").mask("00/00/0000",{onComplete:function(n){validaDatePickerManual("PeriodoInicial",n)},placeholder:"__/__/____"});$("#PeriodoFinal").mask("00/00/0000",{onComplete:function(n){validaDatePickerManual("PeriodoFinal",n)},placeholder:"__/__/____"});$("#PeriodoInicial").datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0});$("#PeriodoFinal").datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0});$("#pesquisaCliente").click(function(n){return $(this).val(""),$("#TarifaCliente").find("option").remove().end(),n.preventDefault(),n.stopPropagation(),!1});$("#pesquisaCliente").keyup(delay(function(){BuscaClientes()},500));$("#pesquisaProfissional").keyup(delay(function(){BuscaProfissionais()},500));$("#ClienteSelecionado").change(function(){var t=$(this).find("option:selected"),n,i;t!=undefined&&(n=t.val(),i=t.text(),n!=undefined&&n!=""&&BuscaTarifas(n))});$("#ProfissionalSelecionado").change(function(){var t=$(this).find("option:selected"),n,i;t!=undefined&&(n=t.val(),i=t.text(),n!=undefined&&n!=""&&BuscaComissaoProfissional(n))});BuscaClientes();BuscaProfissionais()});$(document).ready(function(){$(".ctmErrorDataNascimento").on("keyup mouseup",function(n){var t=n.target.id;$('input[id="'+t+'"]').prop("type","date")});$(".mask-telefone").mask("(00) 0000-0000");$(".mask-celular").mask("(00) 00009-0000");var n='<span class="text-danger field-validation-error" data-valmsg-replace="true"><span>',t="<\/span><\/span><\/span>",i=/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/,r=/^(\([0-9]{2}\))\s([9]{1})?([0-9]{4})-([0-9]{4})$/,u=/^(\([0-9]{2}\))\s([9]{1})?([0-9]{4})-([0-9]{4})$/;$("input[name$='DataNascimento']").change(function(){$("div[id$='DataNascimento']").each(function(){var n=$(this).children("input");n[0].value&&$(this).children('span[id="spanError_'+n[0].id+'"]').remove()})});$(document).on("change keyup mouseup mousemove",function(){$(document).find('span[id^="spanError_"]').length===0&&$("#lnkValidarContato").removeClass("isDisabled")});$("input[name^='Contato']").keyup(function(){$("div[id^='Contato']").each(function(){var f=$(this).children("input");f[0].value&&($(this).find("span[id^='spanError_']").remove(),f.hasClass("ctmErrorEmail")?($(this).append('<span id="spanError_'+f[0].id+'" >'),i.test(f[0].value)?$(this).children('span[id="spanError_'+f[0].id+'"]').remove():$(this).children('span[id$="'+f[0].id+'"]').html(n+"E-mail inválido."+t)):f.hasClass("ctmErrorTelefoneComercial")?($(this).append('<span id="spanError_'+f[0].id+'" >'),r.test(f[0].value)?$(this).children('span[id="spanError_'+f[0].id+'"]').remove():$(this).children('span[id$="'+f[0].id+'"]').html(n+"Telefone Comercial inválido. Deve ser fixo."+t)):f.hasClass("ctmErrorTelefoneCelular")?($(this).append('<span id="spanError_'+f[0].id+'" >'),u.test(f[0].value)?$(this).children('span[id="spanError_'+f[0].id+'"]').remove():$(this).children('span[id$="'+f[0].id+'"]').html(n+"Telefone Celular inválido. Deve conter 9 adicional."+t)):f.hasClass("ctmErrorDataNascimento")&&f[0].value.length>10&&(f[0].value="",f[0].blur(),$(this).append('<span id="spanError_" >'+n+"Data inválida"+t)))})})});window.ValidarContato=function(){var n='<span class="text-danger field-validation-error" data-valmsg-replace="true"><span>',t="<\/span><\/span><\/span>";return($("div[id^='Contato']").each(function(){var i=$(this).children("input");!i[0].value&&$(this).closest(".div-contato-removido").length<=0&&(i.hasClass("ctmErrorContato")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Nome do Contato obrigatório."+t):"",i.hasClass("ctmErrorEmail")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"E-mail obrigatório."+t):"",i.hasClass("ctmErrorTelefoneComercial")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Telefone Comercial obrigatório."+t):"",i.hasClass("ctmErrorTelefoneCelular")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Telefone Celular obrigatório."+t):"",i.hasClass("ctmErrorSetor")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Setor é obrigatório."+t):"",i.hasClass("ctmErrorDataNascimento")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"A Data de Nascimento é obrigatória"+t):"")}),$(document).find('span[id^="spanError_"]').length>0)?($("#lnkValidarContato").addClass("isDisabled"),!1):!0};window.RemoverBlocoContato=function(n){var t=n.id;return $("#"+t).addClass("div-contato-removido"),$("span","#"+t).each(function(){$(this).remove()}),$("#"+t).find("input[id$='ContatoRemovido']").attr("value",!0),$("#"+t).hide(),!0};window.ExcluirContato=function(n){var t=n.id,i=$("#"+t).find("input[id$='ID']").val(),r=window.confirm("Tem certeza que deseja excluir esse contato da base?");r?$.ajax({url:"/Clientes/ExcluirContato?idContato="+i,type:"POST",success:function(){RemoverBlocoContato(n);$("html, body").animate({scrollTop:$(document).height()},1e3)},error:function(){var n=$("input[id='ID']").val();window.location.href="/Clientes/NovoCliente?edicao=true&clienteID="+n;$("html, body").animate({scrollTop:$(document).height()},1e3)}}):event.stopPropagation()};$(document).ready(function(){$(".ctmErrorVigenciaInicio").on("keyup mouseup",function(n){var t=n.target.id;$('input[id="'+t+'"]').prop("type","date")});$(".ctmErrorVigenciaFim").on("keyup mouseup",function(n){var t=n.target.id;$('input[id="'+t+'"]').prop("type","date")});$(".ctmErrorValorUnitario").keyup(function(n){var t=n.target.id;$('input[id="'+t+'"]').maskMoney({prefix:"R$:",decimal:",",thousands:"."})});$(".ctmErrorFranquia").keyup(function(n){var t=n.target.id;$('input[id="'+t+'"]').maskMoney({decimal:",",thousands:"."})});$(".ctmErrorFranquiaAdicional").keyup(function(n){var t=n.target.id;$('input[id="'+t+'"]').maskMoney({decimal:",",thousands:"."})});$("input[id='Valor_0__ValorAtivado']").prop("checked",!0);$(".ctmErrorValorAtivado").on("change",function(){$(".ctmErrorValorAtivado").not(this).prop("checked",!1)});var n='<span class="text-danger field-validation-error" data-valmsg-replace="true"><span>',t="<\/span><\/span><\/span>";$("input[name$='VigenciaInicio']").change(function(){$("div[id$='VigenciaInicio']").each(function(){var i=$(this).children("input");i.length>0&&($(this).find("span[id^='spanError_']").remove(),i[0].value&&i[0].value.length>10&&(i[0].value="",i[0].blur(),$(this).append('<span id="spanError_" >'+n+"Data inválida"+t)))})});$("input[name$='VigenciaFim']").change(function(){$("div[id$='VigenciaFim']").each(function(){var i=$(this).children("input");i.length>0&&($(this).find("span[id^='spanError_']").remove(),i[0].value&&i[0].value.length>10&&(i[0].value="",i[0].blur(),$(this).append('<span id="spanError_" >'+n+"Data inválida"+t)))})});$('input[id$="VigenciaFim"]').on("change keyup",function(){$("div[id^='date_range']").each(function(){$(this).find("span[id^='spanError_']").length>0&&$(this).find("span[id^='spanError_']").remove();var i=$(this).find('input[id$="VigenciaInicio"]'),r=$(this).find('input[id$="VigenciaFim"]'),u=new Date(i[0].value),f=new Date(r[0].value);u>f?$(this).append('<span id="spanError_" >'+n+"A data final dever ser maior que a data inicial"+t):""})});$(document).on("change keyup mouseup mousemove",function(){$(document).find('span[id^="spanError_"]').length===0&&$("#btnSubmitFormCliente").removeAttr("disabled")});$("input[name^='Valor']").on("change keyup mouseup mousemove",function(){$("div[id^='Valor']").each(function(){var n=$(this).children("input");n.length>0&&(n.hasClass("ctmErrorTipoTarifa")?n.is(":checked")?$(this).children('span[id="spanError_'+n[0].id+'"]').remove():"":n[0].value&&$(this).children('span[id="spanError_'+n[0].id+'"]').remove())})})});window.ValidarValor=function(){var n='<span class="text-danger field-validation-error" data-valmsg-replace="true"><span>',t="<\/span><\/span><\/span>";return($("div[id^='Valor']").each(function(){var i=$(this).children("input");i.hasClass("ctmErrorTipoTarifa")&&$(this).closest(".div-contato-removido").length<=0?i.is(":checked")?"":$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Tipo de tarifa é obrigatório."+t):i.length>0&&!i[0].value&&$(this).closest(".div-contato-removido").length<=0&&(i.hasClass("ctmErrorValorUnitario")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Valor unitario é obrigatório."+t):"",i.hasClass("ctmErrorVigenciaInicio")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Obrigatório."+t):"",i.hasClass("ctmErrorVigenciaFim")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Obrigatório."+t):"",i.hasClass("ctmErrorFranquia")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Franquia é obrigatório."+t):"",i.hasClass("ctmErrorFranquiaAdicional")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Franquia adicional é obrigatória."+t):"",i.hasClass("ctmErrorObservacao")?$(this).append('<span id="spanError_'+i[0].id+'" >'+n+"Observação é obrigatório."+t):"")}),$(document).find('span[id^="spanError_"]').length>0)?($("#btnSubmitFormCliente").attr("disabled","true"),!1):!0};window.RemoverBlocoValor=function(n){var t=n.id;return $("#"+t).addClass("div-contato-removido"),$("span","#"+t).each(function(){$(this).remove()}),$("#"+t).find("input[id$='ValorRemovido']").attr("value",!0),$("#"+t).hide(),!0};window.ExcluirValor=function(n){var t=n.id,i=$("#"+t).find("input[id$='ID']").val(),r=window.confirm("Tem certeza que deseja excluir esse valor da base?");r?$.ajax({url:"/Clientes/ExcluirValor?idValor="+i,type:"POST",success:function(){RemoverBlocoValor(n);$("html, body").animate({scrollTop:$(document).height()},1e3)},error:function(){var n=$("input[id='ID']").val();$("html, body").animate({scrollTop:$(document).height()},1e3);window.location.href="/Clientes/NovoCliente?edicao=true&clienteID="+n}}):event.stopPropagation()};window.PesquisaTarifarioPadrao=function(n){var t=n.id,i=$("#"+t).find("input[id^='ValorPadrao']");i.prop("checked")&&$.ajax({url:"/Tarifario/BuscarTarifarioPadraoAtivo",type:"GET",dataType:"json",success:function(n){var i=JSON.parse(n);$("#"+t).find("input[id$='ValorUnitario']").val(i.ValorDiaria);$("#"+t).find("input[id$='VigenciaInicio']").val(i.VigenciaInicio);$("#"+t).find("input[id$='VigenciaFim']").val(i.VigenciaFim);$("#"+t).find("input[id$='Franquia']").val(i.FranquiaKMDiaria);$("#"+t).find("input[id$='FranquiaAdicional']").val(i.ValorKMAdicionalMensalidade);$("#"+t).find("input[id$='Observacao']").val(i.Descricao)},error:function(){alert("Ops! Não foi possível buscar essa informação. Tente novamente mais tarde.")}})};document.addEventListener("DOMContentLoaded",function(){var n,t,i;$("#loading").hide();mascaraComissoes();$("#TelefoneResidencial").mask("(00) 0000-0000");$("#TelefoneCelular").mask("(00) 0000-00009");n=function(n){return n.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009"};t={onKeyPress:function(t,i,r,u){r.mask(n.apply({},arguments),u)}};$("#CpfCnpj").mask(n,t);$("#confirmaMotorista").click(function(n){var t;return $(".rowList").each(function(){var r=$(this).find("input[id*='ValorComissao']"),n=$(this).find("input[id*='VigenciaInicio']"),i=$(this).find("input[id*='VigenciaFim']");r.val()!=""||n.val()!=""||i.val()!=""||$(".rowList").length>1?(r.val()==""?(r.css("border-color","red"),AdicionarErroCampo(r.attr("id"),"Favor preencher um valor para a comissão.",1e4),t=!0):r.css("border-color","#ccc"),n.val()==""?(n.css("border-color","red"),AdicionarErroCampo(n.attr("id"),"Favor preencher um valor para a data de vigência inicial.",1e4),t=!0):isValidDate(n.val())?n.css("border-color","#ccc"):(n.css("border-color","red"),AdicionarErroCampo(n.attr("id"),"Favor preencher uma data válida.",1e4),t=!0),i.val()==""?(i.css("border-color","red"),AdicionarErroCampo(i.attr("id"),"Favor preencher um valor para a data de vigência final.",1e4),t=!0):isValidDate(i.val())?i.css("border-color","#ccc"):(i.css("border-color","red"),AdicionarErroCampo(i.attr("id"),"Favor preencher uma data válida.",1e4),t=!0)):(r.css("border-color","#ccc"),n.css("border-color","#ccc"),i.css("border-color","#ccc"))}),t?(MensagemAlerta("Os Campos destacados são obrigatórios."),n.preventDefault(),n.stopPropagation(),!1):void 0});i={Cep:$("#Cep"),Rua:$("#Rua"),Bairro:$("#Bairro"),Cidade:$("#Cidade"),Estado:$("#UF"),NumeroEndereco:$("#RuaNumero")};$("#Cep").mask("00000-000",GetOptionsViaCep(i));$("#btnNovoContatos").click(function(){$.ajax({url:"/Motorista/AddComissao",type:"POST",dataType:"html",data:$("#DetalheMotorista").serialize(),success:function(){window.location.href="/Motorista/Novo?alteraComissao=TRUE";$("html, body").animate({scrollTop:$(document).height()},1e3);mascaraComissoes()},error:function(){$("html, body").animate({scrollTop:$(document).height()},1e3)}})})});document.addEventListener("DOMContentLoaded",function(){function n(){$.ajax({dataType:"json",type:"GET",url:"/Dashboard/BuscaLocalizacao",success:function(n){$(n).each(function(t){var i=n[t].geoPosicao.split(";")[0],r=n[t].geoPosicao.split(";")[1],u=n[t].desc;FazMarcacao(i,r,n[t].psCorrida,u)});(n==""||n==undefined)&&($("#msgModal").text("Não foram encontrados localizações para marcação no mapa."),$("#imgMensagem").attr("src","..\\Images\\warming.png"),$("#myModal").modal("show"))}})}carregaMapa();n()});document.addEventListener("DOMContentLoaded",function(){$("#pesquisaCliente").keyup(delay(function(){BuscaClientes()},500));BuscaClientes();$("#confirmaFaturamento").click(function(){})});map=null;$(document).ready(function(n){n(".counter").counterUp({delay:10,time:1e3});n("#PesquisaOSCliente").mask("0#");n("#PesquisaMotociclista").mask("0#");buscaGraficoResumoSituacaoChamados();buscaGraficoResumoSituacaoAtendimentos()});document.addEventListener("DOMContentLoaded",function(){$("#loading").hide();$("#btnLogar").click(function(){$("#loading").show()})});document.addEventListener("DOMContentLoaded",function(){$("#loading").hide();alteraMenu();$("#menuLogisticaMobile").click(function(){var n=$(".main-sidebar");n.css("display")==="none"||n.css("display")==undefined?n.animate({opacity:.25,left:"+=0",height:"toggle"},400,function(){n.css("display","inline-block");n.css("opacity","1");$(window).width()>1112?$(".content-wrapper").first().css("padding-left","230px"):$(".content-wrapper").first().css("padding-left","0px")}):n.animate({opacity:.25,right:"+=50",height:"toggle"},400,function(){n.css("display","none");n.css("opacity","1");$(window).width()>1112?$(".content-wrapper").first().css("padding-left","0px"):$(".content-wrapper").first().css("padding-left","0px")})});$("#closeMsgGeral").click(function(){$("#msgModal").text("")});$("#menuLateral a").click(function(){$("#loading").show()})});document.addEventListener("DOMContentLoaded",function(){var n,t,i;$("#tabs").tabs({disabled:[1,2]});n=function(n){return n.replace(/\D/g,"").length>11?"00.000.000/0000-00":"000.000.000-009"};t={onKeyPress:function(t,i,r,u){r.mask(n.apply({},arguments),u)}};$("#DadosCadastrais_CPFCNPJ").mask(n,t);i={Cep:$("#DadosCadastrais_CEP"),Rua:$("#DadosCadastrais_Endereco"),Bairro:$("#DadosCadastrais_Bairro"),Cidade:$("#DadosCadastrais_Cidade"),Estado:$("#DadosCadastrais_Estado"),NumeroEndereco:$("#DadosCadastrais_NumeroEndereco")};$("#DadosCadastrais_CEP").mask("00000-000",GetOptionsViaCep(i))});window.Validar=function(n=null,t=null,i=null){$("form").valid()&&ProximaTab(n,t,i)};window.ProximaTab=function(n,t,i){n&&t?$("#tabs").tabs({disabled:[0,1]}):n&&i?$("#tabs").tabs({disabled:[0,2]}):t&&i&&$("#tabs").tabs({disabled:[1,2]});var r=$("#tabs").tabs("option","active");$("#tabs").tabs("option","active",r+1)};window.AnteriorTab=function(n,t,i){n&&t?$("#tabs").tabs({disabled:[0,1]}):n&&i?$("#tabs").tabs({disabled:[0,2]}):t&&i&&$("#tabs").tabs({disabled:[1,2]});var r=$("#tabs").tabs("option","active");$("#tabs").tabs("option","active",r-1)};document.addEventListener("DOMContentLoaded",function(){$("label[rel=popover]").popover({html:!0,trigger:"click",placement:"auto",title:'<button type="button" id="close" class="close" onclick="closePopover()">&times;<\/button><\/br>',content:function(){return'<img class="img-responsive" src='+$(this).data("img")+" />"}})});$("#pesquisaCliente").keyup(delay(function(){BuscaClientes()},500));window.onload=function(){$("#loading").show()};document.addEventListener("DOMContentLoaded",function(n){var t=document.getElementById("TipoUser");t.remove(2);$("#TipoUser").change(function(){necessarioCliente()});$("#ClienteSelecionado").change(function(){$("#ClienteSelecionado").css("border-color","#ccc")});$("#confirmaMotorista").click(function(){if(necessarioCliente()){var t=$("#ClienteSelecionado").prop("selectedIndex");if(t===undefined||t==="undefined"||t==0)return $("#ClienteSelecionado").css("border-color","red"),MensagemAlerta("Selecione um cliente para prosseguir."),n.preventDefault(),n.stopPropagation(),!1;$("#ClienteSelecionado").css("border-color","#ccc")}});$("#EdicaoCadastro").val()==="True"?(necessarioCliente(),setTimeout(function(){$("#Senha").val("");$("#loading").hide()},100),BuscaClientes($("#ClienteSelecionadoBKP").val())):(setTimeout(function(){$("#Senha").val("");$("#Email").val("");$("#loading").hide()},700),BuscaClientes())});document.addEventListener("DOMContentLoaded",function(){$(".cst-tbl-linhaHover").click(function(n){editarUsuarioNavegacao(n)})});window.month=[];month[1]="Janeiro";month[2]="Fevereiro";month[3]="Março";month[4]="Abril";month[5]="Maio";month[6]="Junho";month[7]="Julho";month[8]="Agosto";month[9]="Setembro";month[10]="Outubro";month[11]="Novembro";month[12]="Dezembro";